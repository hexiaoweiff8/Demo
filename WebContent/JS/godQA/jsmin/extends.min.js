!function(a){a.base64encode=function(a){var b,c,d,e,f,g,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(d=a.length,c=0,b="";d>c;){if(e=255&a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4),b+="==";break}if(f=a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2),b+="=";break}g=a.charCodeAt(c++),b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2|(192&g)>>6),b+=h.charAt(63&g)}return b},a.htmlEncode=function(a){var b,c=document.createElement("div");return null!=c.textContent?c.textContent=a:c.innerText=a,b=c.innerHTML,c=null,b},a.htmlDecode=function(a){var b,c=document.createElement("div");return c.innerHTML=a,b=c.innerText||c.textContent,c=null,b},a.parseGet=function(a){var b=window.location.href,c=/\?/.test(b)?b.split("?")[1]:"",d=new RegExp(a+"=","i"),e=c.split(d),f="";return c&&e.length>1&&(f=e[1].split("&")[0]),f},a.parseMillisecond=function(a){if(!a)return"";var b=new Date(a),c=b.getFullYear(),d=("0"+b.getMonth()).slice(-2),e=("0"+b.getDate()).slice(-2),f=("0"+b.getHours()).slice(-2),g=("0"+b.getMinutes()).slice(-2);return c+"-"+d+"-"+e+" "+f+":"+g},a.parseExpression=function(a){var b=["微笑","亲吻","调皮","惊","耍酷","发火","害羞","汗水","大哭","得意","鄙视","困","夸奖","晕倒","疑问","尴尬","狂吐","瞪","委屈","狂吻","惑","爱心","心碎","玫瑰","礼物","傻笑","奸笑","可爱","阴谋","呲牙","暴汗","可怜","睡","狂哭","愤怒","惊讶","喷","彩虹","夜空","太阳","钱钱","灯泡","咖啡","蛋糕","音乐","爱","胜利","赞","鄙视","欧克"];for(var c in b)a=a.replace("[/"+b[c]+"]","<img class='expression' src='./img/expressions/i_f"+("0"+ ++c).slice(-2)+".gif'/>");return a=a.replace(/(\[$)|(\[\/([^\]\s]{0,2})$)/,"")},a.parseContent=function(b,c){if("string"!=typeof b)return{};b=b.replace(/<[^>]+>/gm,function(a){var b=a.length,c=a.slice(1,b-1);return"&lt;"+c+"&gt;"});var d=a.parseExpression(a.htmlDecode(b)),e=null;if(c){for(var f=d.match(/<[^>]*img[^>]+>/gim)||[],g=d.split(/<[^>]*img[^>]+>/gim),h=0,i="",j=0,k=g.length;k>j;j++){var l=h;if(g[j]=g[j].replace(/<[^>]+>/gm,""),h+=g[j].length,h>=c){i+=g[j].slice(0,c-l);break}i+=g[j]+(f[j]||""),h++}e={decodeContent:d,sliceContent:h>c?i+"...":i}}else e={decodeContent:d};return e},a.emitNotification=function(a,b){var c='<div class="bill-notify animated fadeIn"><div>'+a+"</div></div>",d=this(c).appendTo("body").show().one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){d.removeClass("fadeIn"),setTimeout(function(){d.addClass("fadeOut").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){d.remove()}),b&&b()},800)})},a.revealAnswer=function(b,c,d,e,f){function g(){$ansContent.height(a(window).height()-hOutLine-hOutClose)}var h=a("#god_qa_list"),i=a("#god_q"),j=a("body"),k=f?'<img width="100%" src="'+f+'"/>':"";tplAns='<article class="reveal-a animated fadeIn"><header class="a-header"><div class="a-avatar"><img src="'+b+'"/></div><p class="a-name">'+c+'</p><p class="a-time">'+d+'</p></header><div class="line"></div><section class="a-content">'+a.parseExpression(e)+k+'</section><div class="a-close"></div></article>',$ans=this(tplAns).appendTo(j).show(),$ansContent=$ans.children(".a-content"),$line=$ans.children(".line"),$close=$ans.children(".a-close"),hOutLine=1+parseInt($line.css("margin-top"))+parseInt($line.css("margin-bottom")),hOutClose=$close.height()+2*parseInt($close.css("margin-top")),bodyScrollTop=j.scrollTop(),h.addClass("oh h0"),i.hide(),a(window).resize(g),g(),$close.tap(function(){h.removeClass("oh h0"),j.scrollTop(bodyScrollTop),i.show(),$ans.removeClass("fadeIn").addClass("fadeOut").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a(window).unbind("resize",g),$ans.remove()})})},a.asyncLoadScript=function(a,b){var c=document.createElement("script");c.type="text/javascript",c.async=!0,c.onload=c.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(b&&b(),c.onload=c.onreadystatechange=null)},c.src=a,this(c).appendTo("body")},a.waitFor=function(a,b,c){c||(c=10),c*=1e3;var d=setInterval(function(){c-=30,a&&a()&&(b&&b(),clearInterval(d)),0>c&&clearInterval(d)},30)},a.gonnaLogin=function(b,c,d){function e(){window.oBridgeV2||(window.oBridgeV2=jsBridgeV2&&new jsBridgeV2(function(b){"string"==typeof b&&(b=JSON.parse(b)),"data"in b&&(window.location.href=window.appUrlLoginBack+"&sid="+a.base64encode(decodeURIComponent(b.data)))})),window.oBridgeV2&&window.oBridgeV2.jsToGetResp({type:1,data:""})}if("app"===b)switch(d&&d()){case"loading":a.waitFor(function(){return"loaded"===d()},function(){e()});break;case"loaded":e();break;default:a.asyncLoadScript(c.urlBridgev2,function(){e()})}else window.location.href=c.accessViaWeb+"&returnurl="+encodeURIComponent(window.appUrlLoginBack)}}(Zepto),function(a){a.fn.initDottedLoading=function(a){var b=this,c=null,d=new RegExp("(^"+a+")(.*$)"),e=1;b.text(a),c=setInterval(function(){var f=b.text().trim();if(d.test(f)){e>3&&(e=0);for(var g=a,h=0;e>h;h++)g+=".";b.text(g),e++}else clearInterval(c)},300)}}(Zepto),window.jQuery=window.Zepto;var jaq=jaq||[];jaq.push(["account","UA-J2011-12"]),jaq.push(["domain","m.jr.jd.com"]),function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://cscssl":"http://csc")+".jd.com/joya.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}();var _jraq=_jraq||[];_jraq.push(["account","UA-J2011-12"]),function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https:"==document.location.protocol?"https://static.wangyin.com/member/assets/click.js":"http://click.jr.jd.com/wl.dev.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}();